{% extends "base.html" %}

{% block content %}
<article class="campaign-detail">
    <header class="campaign-header">
        <h1>{{ campaign.title }}</h1>
        <span class="status-badge {{ campaign.status }}">{{ campaign.status }}</span>
        <p class="campaign-meta">Created: {{ campaign.created_at|datetime }}</p>
    </header>

    <section class="campaign-description">
        <h2>About this Campaign</h2>
        <p>{{ campaign.description }}</p>
    </section>

    <section class="email-preview">
        <h2>Email Preview</h2>
        <div class="email-template">
            <div class="email-field">
                <label>To:</label>
                <span>{{ campaign.recipients|map(attribute='email')|join(', ') }}</span>
            </div>
            <div class="email-field">
                <label>Subject:</label>
                <span>{{ campaign.template.subject }}</span>
            </div>
            <div class="email-content">
                {{ campaign.template.body|nl2br|safe }}
            </div>
        </div>
    </section>

    <div class="campaign-actions">
        <a href="{{ url_for('main.generate_email', campaign_id=campaign.id) }}" 
           class="btn btn-primary">Send Email Now</a>
        <button class="btn btn-secondary" id="copy-email">Copy Email Text</button>
        <a href="{{ url_for('main.index') }}" class="btn btn-outline">Back to Campaigns</a>
    </div>
</article>
{% endblock %}